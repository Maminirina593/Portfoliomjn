// ==================== language.js – FULL ENGLISH TRANSLATION ====================
const translations = {
    fr: {
        // HOME
        "home.description": "Développeur Fullstack passionné par les nouvelles technologies et l'innovation. J'aime concevoir des applications web modernes, intuitives et performantes. Curieux, créatif et rigoureux, je cherche toujours à apprendre et à m'améliorer. Mon objectif : transformer les idées en solutions digitales concrètes et efficaces.",
        "home.contactBtn": "Me Contacter",
        "home.projectsBtn": "Voir mes Projets",

        // ABOUT
        "about.title": "À Propos de Moi",
        "about.text1": "Basé à Madagascar, je suis diplômé en informatique et développeur fullstack passionné par l'innovation et les technologies du web. Je conçois et développe des applications web modernes, performantes et sécurisées, en respectant les bonnes pratiques de développement et les standards du web. Ma démarche repose sur la qualité du code, la clarté de l'architecture et l'optimisation continue des performances. Curieux et rigoureux, je veille à maintenir mes compétences à jour afin de proposer des solutions adaptées aux besoins des utilisateurs et des organisations.",
        "about.text2": "De janvier 2025 à mai 2025, j'ai effectué un stage en tant que développeur web à la Direction Générale des Impôts (SSIF). J'y ai développé une application web dédiée à la création et au suivi des projets informatiques, en utilisant Symfony, Bootstrap et PostgreSQL. Cette expérience m'a permis de renforcer mes compétences en développement fullstack et de mieux comprendre les besoins réels d'un environnement professionnel.",

        // EDUCATION
        "education.title": "Études & Certificats",
        "education.academic": "Formations Académiques",
        "education.certs": "Certificats & Formations",

        // SKILLS
        "skills.title": "Mes Compétences",
        "skills.dev": "Développement",
        "skills.other": "Autres Compétences",
        "skills.programming": "Langages de Programmation",
        "skills.frontend": "Front-End",
        "skills.backend": "Back-End",
        "skills.webtech": "Web Tech",
        "skills.tools": "Outils",
        "skills.database": "Base de données",
        "skills.office": "Microsoft Office",
        "skills.os": "Systèmes d'exploitation",
        "skills.graphics": "Logiciels Création Graphique",

        // SOFT SKILLS
        "soft.teamwork": "Travail d'équipe",
        "soft.time": "Gestion du temps",
        "soft.problem": "Résolution de problèmes",
        "soft.adapt": "Adaptabilité",

        // PROJECTS
        "projects.title": "Mes Projets",
        "projects.more": "Voir plus de projets",
        "projects.less": "Voir moins de projets",
        "projects.demo": "Démo",
        "projects.p1": "Application complète de gestion de stock avec suivi des inventaires, alertes et rapports dynamiques.",
        "projects.p2": "Plateforme de suivi de projets IT avec diagramme de Gantt, tâches, notifications et rapports avancés.",
        "projects.p3": "Version moderne avec API REST, interface React et tableau de bord analytique.",
        "projects.p4": "Jeu interactif avec IA, animations 3D, mode multijoueur et thèmes personnalisés.",
        "projects.p5": "Outil de planification annuelle avec calendriers, rapports et export PDF.",
        "projects.p6": "Système de cotisation avec rappels automatiques, historique et génération de reçus.",
        "projects.p7": "Portfolio responsive avec mode sombre, animations fluides, multilingue (FR/EN), toggle projets, formulaire de contact fonctionnel et design moderne.",
        "projects.p8": "Conversion pixel-perfect d’une maquette PSD en site web responsive avec préprocesseur Sass (variables, mixins, nesting) et animations jQuery.",

        // CONTACT
        "contact.title": "Me Contacter",
        "contact.send": "Envoyer",
        "contact.name": "Nom",
        "contact.email": "Email",
        "contact.message": "Votre Message",

        // FOOTER
        "footer.copyright": "© <span id=\"currentYear\"></span> <strong>Maminirina Jean Noël</strong>. Tous droits réservés.",
        "footer.made": "Fait avec <i class=\"fas fa-heart\"></i> et <i class=\"fas fa-code\"></i> par <strong>Maminirina</strong>",

        // CV BUTTON
        "cv.download": "Télécharger mon CV"
    },
    en: {
        // HOME
        "home.description": "Fullstack Developer passionate about new technologies and innovation. I love designing modern, intuitive, and high-performance web applications. Curious, creative, and rigorous, I'm always looking to learn and improve. My goal: transform ideas into concrete and effective digital solutions.",
        "home.contactBtn": "Contact Me",
        "home.projectsBtn": "View My Projects",

        // ABOUT
        "about.title": "About Me",
        "about.text1": "Based in Madagascar, I'm a computer science graduate and fullstack developer passionate about innovation and web technologies. I design and develop modern, performant, and secure web applications, following development best practices and web standards. My approach focuses on code quality, clear architecture, and continuous performance optimization. Curious and rigorous, I keep my skills up to date to provide solutions adapted to users' and organizations' needs.",
        "about.text2": "From January 2025 to May 2025, I completed an internship as a web developer at the General Tax Directorate (SSIF). I developed a web application dedicated to creating and tracking IT projects using Symfony, Bootstrap, and PostgreSQL. This experience allowed me to strengthen my fullstack development skills and better understand the real needs of a professional environment.",

        // EDUCATION
        "education.title": "Education & Certificates",
        "education.academic": "Academic Education",
        "education.certs": "Certificates & Training",

        // SKILLS
        "skills.title": "My Skills",
        "skills.dev": "Development",
        "skills.other": "Other Skills",
        "skills.programming": "Programming Languages",
        "skills.frontend": "Front-End",
        "skills.backend": "Back-End",
        "skills.webtech": "Web Technologies",
        "skills.tools": "Tools",
        "skills.database": "Database",
        "skills.office": "Microsoft Office",
        "skills.os": "Operating Systems",
        "skills.graphics": "Graphic Design Software",

        // SOFT SKILLS
        "soft.teamwork": "Teamwork",
        "soft.time": "Time Management",
        "soft.problem": "Problem Solving",
        "soft.adapt": "Adaptability",

        // PROJECTS
        "projects.title": "My Projects",
        "projects.more": "View more projects",
        "projects.less": "View less projects",
        "projects.demo": "Demo",
        "projects.p1": "Complete inventory management application with stock tracking, alerts and dynamic reports.",
        "projects.p2": "IT project tracking platform with Gantt charts, tasks, notifications and advanced reports.",
        "projects.p3": "Modern version with REST API, React frontend and analytical dashboard.",
        "projects.p4": "Interactive game with AI, 3D animations, multiplayer mode and custom themes.",
        "projects.p5": "Annual planning tool with calendars, reports and PDF export.",
        "projects.p6": "Membership system with reminders, history and receipt generation.",
        "projects.p7": "Responsive portfolio with dark mode, smooth animations, multilingual (FR/EN), project toggle, functional contact form and modern design.",
        "projects.p8": "Pixel-perfect conversion of a PSD mockup into a responsive website using Sass preprocessor (variables, mixins, nesting) and jQuery animations.",

        // CONTACT
        "contact.title": "Contact Me",
        "contact.send": "Send",
        "contact.name": "Name",
        "contact.email": "Email",
        "contact.message": "Your Message",

        // FOOTER
        "footer.copyright": "© <span id=\"currentYear\"></span> <strong>Maminirina Jean Noël</strong>. All rights reserved.",
        "footer.made": "Made with <i class=\"fas fa-heart\"></i> and <i class=\"fas fa-code\"></i> by <strong>Maminirina</strong>",

        // CV BUTTON
        "cv.download": "Download my CV"
    }
};

function updateLanguage(lang) {
    document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            el.textContent = translations[lang][key];
        }
    });

    document.body.setAttribute('data-lang', lang);
    localStorage.setItem('preferred-language', lang);

    // === DYNAMIC TEXTS ===
    const greetingText = document.querySelector('.greeting-text');
    if (greetingText) {
        greetingText.textContent = lang === 'fr' ? 'Bonjour, je suis' : 'Hello, I am';
    }

    const staticTitle = document.querySelector('.static-title');
    if (staticTitle) {
        staticTitle.textContent = lang === 'fr' ? 'Développeur Fullstack' : 'Fullstack Developer';
    }

    // Form Labels
    const labels = {
        name: lang === 'fr' ? 'Nom' : 'Name',
        email: 'Email',
        message: lang === 'fr' ? 'Votre Message' : 'Your Message'
    };
    document.querySelectorAll('.form-group label').forEach(label => {
        const forAttr = label.getAttribute('for');
        if (labels[forAttr]) label.textContent = labels[forAttr];
    });

    // CV Button
    const cvBtn = document.querySelector('.btn-cv');
    if (cvBtn) {
        cvBtn.innerHTML = lang === 'fr'
            ? '<i class="fas fa-file-pdf"></i> Télécharger mon CV'
            : '<i class="fas fa-file-pdf"></i> Download my CV';
    }

    // Toggle Projects Button
    const toggleBtn = document.getElementById('toggle-projects');
    if (toggleBtn) {
        const btnText = toggleBtn.querySelector('.btn-text');
        if (btnText) {
            btnText.textContent = toggleBtn.classList.contains('collapsed')
                ? (lang === 'fr' ? 'Voir plus de projets' : 'View more projects')
                : (lang === 'fr' ? 'Voir moins de projets' : 'View less projects');
        }
    }

    // Education Titles
    document.querySelectorAll('.education-column h3').forEach(title => {
        if (title.innerHTML.includes('Formations Académiques')) {
            title.innerHTML = lang === 'fr'
                ? '<i class="fas fa-graduation-cap"></i> Formations Académiques'
                : '<i class="fas fa-graduation-cap"></i> Academic Education';
        } else if (title.innerHTML.includes('Certificats')) {
            title.innerHTML = lang === 'fr'
                ? '<i class="fas fa-certificate"></i> Certificats & Formations'
                : '<i class="fas fa-certificate"></i> Certificates & Training';
        }
    });

    // Skills Column Titles
    document.querySelectorAll('.skills-column h3').forEach(title => {
        if (title.textContent === 'Développement') title.textContent = lang === 'fr' ? 'Développement' : 'Development';
        else if (title.textContent === 'Autres Compétences') title.textContent = lang === 'fr' ? 'Autres Compétences' : 'Other Skills';
    });

    // Skill Group Titles
    const skillGroupMap = {
        'Langages de Programmation': 'Programming Languages',
        'Front-End': 'Front-End',
        'Back-End': 'Back-End',
        'Web Tech': 'Web Technologies',
        'Outils': 'Tools',
        'Base de données': 'Database',
        'Microsoft Office': 'Microsoft Office',
        'Systèmes d\'exploitation': 'Operating Systems',
        'Logiciels Création Graphique': 'Graphic Design Software'
    };
    document.querySelectorAll('.skill-group h4').forEach(group => {
        const text = group.textContent;
        group.textContent = lang === 'en' ? (skillGroupMap[text] || text) : Object.keys(skillGroupMap).find(k => skillGroupMap[k] === text) || text;
    });

    // Soft Skills
    const softMap = {
        'Travail d\'équipe': 'Teamwork',
        'Gestion du temps': 'Time Management',
        'Résolution de problèmes': 'Problem Solving',
        'Adaptabilité': 'Adaptability'
    };
    document.querySelectorAll('.soft-tags span').forEach(skill => {
        const text = skill.textContent.replace(/<[^>]*>/g, '').trim();
        const icon = skill.innerHTML.match(/<i[^>]*><\/i>/)?.[0] || '';
        const translated = lang === 'en' ? (softMap[text] || text) : Object.keys(softMap).find(k => softMap[k] === text) || text;
        skill.innerHTML = `${icon} ${translated}`;
    });

    // Project Descriptions
    const projectTexts = [
        "Application complète de gestion de stock avec suivi des inventaires, alertes et rapports dynamiques.",
        "Plateforme de suivi de projets IT avec diagramme de Gantt, tâches, notifications et rapports avancés.",
        "Version moderne avec API REST, interface React et tableau de bord analytique.",
        "Jeu interactif avec IA, animations 3D, mode multijoueur et thèmes personnalisés.",
        "Outil de planification annuelle avec calendriers, rapports et export PDF.",
        "Système de cotisation avec rappels automatiques, historique et génération de reçus.",
        "Portfolio responsive avec mode sombre, animations fluides, multilingue (FR/EN), toggle projets, formulaire de contact fonctionnel et design moderne.",
        "Conversion pixel-perfect d’une maquette PSD en site web responsive avec préprocesseur Sass (variables, mixins, nesting) et animations jQuery."
    ];
    const enProjectTexts = [
        "Complete inventory management application with stock tracking, alerts and dynamic reports.",
        "IT project tracking platform with Gantt charts, tasks, notifications and advanced reports.",
        "Modern version with REST API, React frontend and analytical dashboard.",
        "Interactive game with AI, 3D animations, multiplayer mode and custom themes.",
        "Annual planning tool with calendars, reports and PDF export.",
        "Membership system with reminders, history and receipt generation.",
        "Responsive portfolio with dark mode, smooth animations, multilingual (FR/EN), project toggle, functional contact form and modern design.",
        "Pixel-perfect conversion of a PSD mockup into a responsive website using Sass preprocessor (variables, mixins, nesting) and jQuery animations."
    ];
    document.querySelectorAll('.project-card p').forEach((desc, i) => {
        desc.textContent = lang === 'en' ? enProjectTexts[i] : projectTexts[i];
    });

    // Demo Links
    document.querySelectorAll('.demo-link').forEach(link => {
        link.innerHTML = lang === 'fr'
            ? '<i class="fas fa-video"></i> Démo'
            : '<i class="fas fa-video"></i> Demo';
    });

    // Footer
    const copyright = document.querySelector('.copyright');
    if (copyright) {
        copyright.innerHTML = translations[lang]['footer.copyright'].replace('<span id="currentYear"></span>', new Date().getFullYear());
    }
    const madeWith = document.querySelector('.made-with');
    if (madeWith) madeWith.innerHTML = translations[lang]['footer.made'];

    // Professional Experience Title
    const expTitle = document.querySelector('#about .about-card h3');
    if (expTitle && expTitle.textContent === 'Expérience professionnelle') {
        expTitle.textContent = lang === 'fr' ? 'Expérience professionnelle' : 'Professional Experience';
    }

    // Education Descriptions & Tags
    const eduDescMap = {
        "Renforcement des compétences en développement logiciel moderne": "Strengthening skills in modern software development, including artificial intelligence, mobile development, agile project management, virtualization, and data analysis for better decision-making.",
        "Formation complète en développement logiciel": "Complete software development training: Java, C++, C, PHP, JS, modern frameworks, relational databases, fullstack web development.",
        "Node.js, Express, React, MongoDB": "Node.js, Express, React, MongoDB",
        "Communication professionnelle, expression orale": "Professional communication, oral expression, technical vocabulary"
    };
    document.querySelectorAll('.edu-desc').forEach(desc => {
        const text = desc.textContent.trim();
        desc.textContent = lang === 'en' ? (eduDescMap[text] || text) : Object.keys(eduDescMap).find(k => eduDescMap[k] === text) || text;
    });

    const eduTagMap = {
        'Intelligence Artificielle': 'Artificial Intelligence',
        'Application Mobile': 'Mobile Application',
        'Gestion de Projet Agile': 'Agile Project Management',
        'Virtualisation': 'Virtualization',
        'Data Analyste': 'Data Analyst',
        'Programmation orientée objet': 'Object Oriented Programming',
        'Bases de données': 'Databases',
        'Développement web fullstack': 'Fullstack Web Development',
        'Architecture multi-tiers': 'Multi-tier Architecture',
        'Algorithmique': 'Algorithms',
        'Conception relationnelle': 'Relational Design'
    };
    document.querySelectorAll('.edu-tags span').forEach(tag => {
        const text = tag.textContent;
        tag.textContent = lang === 'en' ? (eduTagMap[text] || text) : Object.keys(eduTagMap).find(k => eduTagMap[k] === text) || text;
    });
}

// Initialize on load
document.addEventListener('DOMContentLoaded', () => {
    const langSelect = document.getElementById('lang-select');
    const savedLang = localStorage.getItem('preferred-language') || 'fr';
    langSelect.value = savedLang;
    updateLanguage(savedLang);

    langSelect.addEventListener('change', e => updateLanguage(e.target.value));
});